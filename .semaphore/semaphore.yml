version: v1.0
name: Initial Pipeline
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
blocks:
  - name: 'Testing'
    task:
      jobs:
        - name: 'Unit tests (tox)'
          commands:
            - checkout
            - sudo apt-get install -y tox
            - tox
        - name: 'FV (DevStack + Tempest)'
          commands:
            - checkout
            - ln -s . networking-calico
            - DEVSTACK_BRANCH=stable/rocky DEVSTACK_REPO=https://github.com/neiljerram/devstack.git ./devstack/bootstrap.sh
